<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🤍 마이 웨딩 🤍</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
  <!-- 로그인/회원가입 모달 -->
  <div id="authModal" class="auth-modal">
    <div class="auth-box">
      <h2>🤍 마이 웨딩</h2>
      <div class="auth-tabs">
        <button class="auth-tab active" data-tab="login" onclick="switchAuthTab('login')">로그인</button>
        <button class="auth-tab" data-tab="register" onclick="switchAuthTab('register')">회원가입</button>
      </div>

      <!-- 로그인 폼 -->
      <form id="loginForm" class="auth-form active" onsubmit="handleLogin(event)">
        <div class="form-group">
          <label>아이디</label>
          <input type="text" id="loginUsername" required>
        </div>
        <div class="form-group">
          <label>비밀번호</label>
          <input type="password" id="loginPassword" required>
        </div>
        <button type="submit" class="btn-auth">로그인</button>
        <div id="loginError" class="auth-error"></div>
      </form>

      <!-- 회원가입 폼 -->
      <form id="registerForm" class="auth-form" onsubmit="handleRegister(event)">
        <div class="form-group">
          <label>아이디</label>
          <input type="text" id="registerUsername" required>
        </div>
        <div class="form-group">
          <label>비밀번호</label>
          <input type="password" id="registerPassword" required minlength="4">
        </div>
        <div class="form-group">
          <label>이메일 (선택)</label>
          <input type="email" id="registerEmail">
        </div>
        <button type="submit" class="btn-auth">회원가입</button>
        <div id="registerError" class="auth-error"></div>
      </form>
    </div>
  </div>

  <!-- 메인 컨텐츠 -->
  <div id="appContent" style="display: none;">
    <div class="container">
      <!-- 헤더 -->
      <div class="header">
        <div class="header-left">
          <h1>🤍 마이 웨딩</h1>
          <p>결혼 준비 계약서를 한눈에 관리하세요</p>
        </div>
        <div class="header-right">
          <div class="user-info" id="userInfo"></div>
          <button class="btn-logout" onclick="handleLogout()">로그아웃</button>
        </div>
      </div>

      <div class="content">
        <!-- 업로드 섹션 -->
        <div class="upload-section">
          <h2>📄 계약서 업로드</h2>
          <p>웨딩홀, 헤어메이크업, 스냅, 드레스 계약서를 업로드하고 자동으로 분류해보세요</p>
          <p class="upload-hint">⚠️ 한 번에 한 계약서만 업로드해주세요 (PDF, PNG, JPG 지원)</p>
          <form id="uploadForm" enctype="multipart/form-data">
            <label for="fileInput" class="file-label">
              📁 파일 선택하기
            </label>
            <input type="file" id="fileInput" name="file" accept=".pdf,.png,.jpg,.jpeg" />
            <div class="file-name" id="fileName"></div>
            <button type="submit" class="submit-btn" id="submitBtn" disabled>
              🚀 분석 시작
            </button>
          </form>
        </div>

        <!-- 상태 메시지 -->
        <div id="status" class="status"></div>

        <!-- OCR 시각화 -->
        <div id="ocrVisual" class="ocr-visual">
          <h3>🔍 OCR 인식 결과 시각화</h3>
          <div class="canvas-container">
            <canvas id="ocrCanvas"></canvas>
          </div>
        </div>

        <!-- 결과 -->
        <div id="result" class="result"></div>

        <!-- 통계 -->
        <div class="stats-section">
          <h2>📊 계약서 현황</h2>
          <div id="statsGrid" class="stats-grid">
            <div class="stat-card">
              <div class="stat-number">0</div>
              <div class="stat-label">전체 계약서</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">0</div>
              <div class="stat-label">웨딩홀</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">0</div>
              <div class="stat-label">헤어메이크업</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">0</div>
              <div class="stat-label">스냅</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">0</div>
              <div class="stat-label">드레스</div>
            </div>
          </div>
        </div>

        <!-- 필터 & 검색 -->
        <div class="filter-section">
          <input type="text" id="searchInput" class="search-input" placeholder="🔍 계약서 검색...">
          <select id="filter" class="filter-select">
            <option value="">전체 카테고리</option>
            <option value="웨딩홀">웨딩홀</option>
            <option value="헤어메이크업">헤어메이크업</option>
            <option value="스냅">스냅</option>
            <option value="드레스">드레스</option>
            <option value="기타">기타</option>
          </select>
          <button id="loadList" class="refresh-btn">🔄 새로고침</button>
        </div>

        <!-- 계약서 목록 -->
        <ul id="contractList" class="contract-list">
          <div class="empty-state">
            <div style="font-size: 48px; margin-bottom: 12px;">📭</div>
            <div style="font-size: 16px; font-weight: 500;">
              아직 저장된 계약서가 없습니다
            </div>
          </div>
        </ul>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>